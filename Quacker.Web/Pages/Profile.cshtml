@page
@model Quacker.Web.Pages.UserProfileModel
@{
}

<div class="row">
    <div class="col-12">
        @if (Model.IsItOwnProfile)
        {
            <!-- PROFILE HEADER -->
            <div class="qw-profile-header p-3">
                @if (Model.Profile.HasImage)
                {
                    <img class="qw-lg-profile" src="/imgs/users/@(Model.Profile.Id).jpg">
                }
                else
                {
                    <img class="qw-lg-profile" src="/imgs/default.jpg">
                }
                <h3 class="qw-user-name">@Model.Profile.DisplayName</h3>
                <div class="qw-user-followers">@Model.Profile.NumberOfFollowers followers</div>
            </div>
            <!-- CREATE NEW POST -->
            <div class="qw-add-post p-3 my-3">
                @if (Model.Profile.HasImage)
                {
                    <img class="qw-sm-profile" src="/imgs/users/@(Model.Profile.Id).jpg">
                }
                else
                {
                    <img class="qw-sm-profile" src="/imgs/default.jpg">
                }
                <form>
                    <textarea class="form-control" id="your-post" rows="3"></textarea>

                    <div class="input-group mt-2">
                        <div class="custom-file">
                            <input type="file" class="custom-file-input" id="inputGroupFile02">
                            <label class="custom-file-label" for="inputGroupFile02" aria-describedby="inputGroupFileAddon02">Choose file</label>
                        </div>
                        <div class="input-group-append">
                            <span class="input-group-text" id="inputGroupFileAddon02">Upload</span>
                        </div>
                    </div>

                    <div class="d-flex flex-row justify-content-end mt-2">
                        <button type="button" class="btn btn-light mr-2">Cancel</button>
                        <button type="button" class="btn btn-primary">Post</button>
                    </div>
                </form>
            </div>
        }
        else
        {
            <div class="qw-profile-header p-3">
                @if (Model.Profile.HasImage)
                {
                    <img class="qw-lg-profile" src="/imgs/users/@(Model.Profile.Id).jpg">
                }
                else
                {
                    <img class="qw-lg-profile" src="/imgs/default.jpg">
                }
                <h3 class="qw-user-name">@Model.Profile.DisplayName</h3>
                <div class="qw-user-followers">@Model.Profile.NumberOfFollowers followers</div>
                <div class="qw-user-buttons">
                    <span>
                        @if (!Model.Profile.isFollowedByCurrentUser)
                        {
                            <button type="button" class="btn btn-primary ml-3">Follow</button>
                        }
                        <button type="button" class="btn btn-primary ml-3 my-1">Direct message</button>
                    </span>
                </div>
            </div>
        }
        <hr>
        <!-- POSTS -->
        <ul class="qw-posts mt-2">
            @foreach (var post in Model.Posts.Results)
            {
                <li class="qw-post p-3 qw-clickable-card mb-3">
                    <a class="qw-post-link" asp-page="/Post" asp-route-id="@post.Id"></a>
                    <div class="qw-post-header">
                        @if (post.Author.HasImage)
                        {
                            <img class="qw-sm-profile" src="/imgs/users/@(post.Author.Id).jpg">
                        }
                        else
                        {
                            <img class="qw-sm-profile" src="/imgs/default.jpg">
                        }
                        <a asp-page="/Profile" asp-route-id="@post.Author.Id" class="qw-post-author">@post.Author.DisplayName</a>
                        <div class="qw-post-date">@post.CreationDate.Humanize()</div>
                    </div>

                    <div class="qw-post-content">
                        @post.Content
                        @if (post.HasImage)
                        {
                            <img src="/imgs/posts/@post.Author.Id/@(post.Id).jpg">
                        }
                    </div>


                    <div class="qw-post-footer mt-2">
                        <div class="qw-post-breads">
                            @if (post.HasCurrentUserLikedIt)
                            {
                                <i class="fas fa-bread-slice fa-lg active"></i>
                            }
                            else
                            {
                                <i class="fas fa-bread-slice fa-lg"></i>
                            }
                            @post.NumberOfLikes
                        </div>
                        <div class="qw-post-comments">
                            <i class="fas fa-comment fa-lg"></i>
                            @post.NumberOfComments
                        </div>
                    </div>
                </li>
            }
        </ul>

    </div>
</div>
<div class="row mt-5">
    <div class="col-12">
        <vc:pager page-size="Model.Posts.PageSize"
                  page-number="Model.Posts.PageNumber"
                  all-results-count="Model.Posts.AllResultsCount"
                  pages-to-show="3">
        </vc:pager>
    </div>
</div>